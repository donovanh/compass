<html>
  <head>
    <title>Compass CSS</title>
    <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
  </head>
  <body>
    
    <article class="container">
      <figure class="compass">
        <span class="marker north"></span>
        <span class="marker east"></span>
        <span class="marker south"></span>
        <span class="marker west"></span>
        <span class="arrow"></span>
      </figure>
    </article>

    <p class="credit"><strong><a href="http://hop.ie/blog/compass/">Compass CSS</a></strong> - View the <a href="http://github.com/donovanh/compass/">source on Github</a></p>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">

    var lastHeading = 0;
    window.addEventListener('deviceorientation', function(e) {
        if (e.webkitCompassHeading == undefined) {
          runDefaultAnimation();
        } else {
          setHeading(e.webkitCompassHeading);
        }
    }, false);

    function runDefaultAnimation() {
      setHeading(45);
      setTimeout(function() {setHeading(-45);}, 1000);
      setTimeout(function() {setHeading(120);}, 2000);
      setTimeout(function() {setHeading(-150);}, 3500);
      setTimeout(function() {runDefaultAnimation();}, 4500);
    }

    function setHeading(compassHeading) {
      $('.compass').css('-webkit-transform', 'rotateZ('+ heading +'deg)');
      var heading = compassHeading + window.orientation;
      // if (Math.abs(heading - lastHeading)<180) {
      //     spinner.style.webkitTransition = 'all 0.2s ease-in-out';
      // } else {
      //     spinner.style.webkitTransition = 'none';
      // }
      $('.compass').css('-webkit-transform', 'rotateZ('+ heading +'deg)');
      lastHeading = heading;
    }


    // // Analytics stuff
    // var _gaq = _gaq || [];
    // _gaq.push(['_setAccount', 'UA-3481417-23']);
    // _gaq.push(['_setDomainName', 'hop.ie']);
    // _gaq.push(['_setSiteSpeedSampleRate', 10]);
    // _gaq.push(['_trackPageview']);

    // (function() {
    //   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    //   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    //   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    // })();

  </script>
  </body>
</html>